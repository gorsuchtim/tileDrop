{"version":3,"sources":["js/components/Starfield/Starfield.js"],"names":["speed_limit","accelerate","speed","stars","fov","extraW","extraH","canv","document","getElementById","querySelector","onresize","resizeCanv","onclick","init","ctx","getContext","minZ","extraW_half","extraH_half","TWOPI","Math","PI","xMin","xMax","yMin","yMax","initScaleX","initScaleY","vel","points","randomPoints","width","window","innerWidth","height","innerHeight","arr","i","push","x","random","y","z","size","project","items","alterScale","projected","forEach","item","scale","inView","drawRects","fillRect","drawCircles","beginPath","arc","fill","closePath","drawText","text","font","round","fillText","animate","save","requestAnimationFrame","fillStyle","translate","restore"],"mappings":"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","file":"Starfield.8b283756.js","sourceRoot":"..\\src","sourcesContent":["var speed_limit = 2; // 2\r\nvar accelerate = true; // true\r\nvar speed = 0; // 0\r\nvar stars = 3400; // 3400\r\nvar fov = 100; // 100 - not actual fov in degrees\r\nvar extraW = (extraH = 1400); // 1400\r\n\r\nvar canv = document.getElementById(\"cv\");\r\ndocument.querySelector(\"body\").onresize = resizeCanv;\r\ncanv.onclick = init;\r\nconst ctx = canv.getContext(\"2d\");\r\nconst minZ = -fov + 2;\r\n\r\n// Precalculating so there are less calculations between frames\r\nvar extraW_half = extraW / 2;\r\nvar extraH_half = extraH / 2;\r\nconst TWOPI = Math.PI * 2;\r\nvar xMin, xMax, yMin, yMax;\r\nvar initScaleX, initScaleY;\r\nvar vel;\r\nvar points;\r\n\r\nfunction init() {\r\n  resizeCanv();\r\n  points = randomPoints();\r\n  vel = speed;\r\n}\r\n\r\nfunction resizeCanv() {\r\n  canv.width = window.innerWidth;\r\n  canv.height = window.innerHeight;\r\n  xMax = canv.width / 2;\r\n  xMin = -xMax;\r\n  yMax = canv.height / 2;\r\n  yMin = -yMax;\r\n  initScaleX = canv.width + extraW;\r\n  initScaleY = canv.height + extraH;\r\n}\r\n\r\nfunction randomPoints() {\r\n  let arr = [];\r\n  for (let i = 0; i < stars; i++) {\r\n    arr.push({\r\n      x: Math.random() * initScaleX - (xMax + extraW_half),\r\n      y: Math.random() * initScaleY - (yMax + extraH_half),\r\n      z: Math.random() * 1000 + 140,\r\n      size: 2\r\n    });\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction project(items, alterScale = true) {\r\n  if (alterScale) alterScale = -0.2;\r\n  else alterScale = 0;\r\n  let projected = [];\r\n  items.forEach(item => {\r\n    let scale = fov / (fov + item.z);\r\n    projected.push({\r\n      x: item.x * scale,\r\n      y: item.y * scale,\r\n      z: item.z,\r\n      size: item.size * scale + alterScale\r\n    });\r\n  });\r\n  return projected;\r\n}\r\n\r\nfunction inView(item) {\r\n  if (\r\n    item.x + item.size > xMin &&\r\n    item.x < xMax &&\r\n    item.y + item.size > yMin &&\r\n    item.y < yMax &&\r\n    item.z < 500\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction drawRects(items) {\r\n  items.forEach(item => {\r\n    if (inView(item)) ctx.fillRect(item.x, item.y, item.size, item.size);\r\n  });\r\n}\r\n\r\nfunction drawCircles(items) {\r\n  items.forEach(item => {\r\n    if (inView(item)) {\r\n      ctx.beginPath();\r\n      ctx.arc(item.x, item.y, item.size, 0, TWOPI);\r\n      ctx.fill();\r\n      ctx.closePath();\r\n    }\r\n  });\r\n}\r\n\r\nfunction drawText(items, text) {\r\n  items.forEach(item => {\r\n    if (inView(item)) {\r\n      ctx.font = Math.round(item.size * 6) + \"px sans-serif\";\r\n      ctx.fillText(text, item.x, item.y);\r\n    }\r\n  });\r\n}\r\n\r\nfunction animate() {\r\n  ctx.save();\r\n  window.requestAnimationFrame(animate);\r\n  ctx.fillStyle = \"rgb(0,0,0)\";\r\n  ctx.fillRect(0, 0, canv.width, canv.height);\r\n  ctx.translate(xMax, yMax);\r\n  ctx.fillStyle = \"rgb(255,255,255)\";\r\n  points.forEach(item => {\r\n    if (item.z > minZ) item.z -= vel;\r\n    else {\r\n      item.z = Math.random() * 600 + 600;\r\n      item.x = Math.random() * initScaleX - (xMax + extraW_half);\r\n      item.y = Math.random() * initScaleY - (yMax + extraH_half);\r\n    }\r\n  });\r\n\r\n  drawRects(project(points));\r\n  //drawCircles(project(points));\r\n  //drawText(project(points), \"♥️\");\r\n\r\n  ctx.restore();\r\n\r\n  if (accelerate) {\r\n    if (vel < speed_limit) vel += 0.04;\r\n  }\r\n}\r\n\r\ninit();\r\nanimate();\r\n\r\n// I know this is overcomplicated, especially\r\n// for something that isn't even interactive. Forgive me.\r\n//\r\n// TODO\r\n//\r\n// 1. Go object oriented with classes?\r\n// 2. Make drawing methods easy\r\n//    to switch between\r\n// 3. Make further objects darker\r\n// 4. Use a consistent\r\n//    variable naming scheme for once\r\n//\r\n// You might ask, why rectangles\r\n//  instead of nice little circles?\r\n//\tWell, because it's less resource\r\n//  intensive to draw. At least my phone struggled with it.\r\n// \tI did provide a method for drawing\r\n//  circles though, but I think it looks worse.\r\n// \tI really should've made objects\r\n//  darker if they were far away.\r\n//  Or maybe I should've drawn\r\n//  the trails of the stars as they move along. Oh well.\r\n//\r\n// The guy to blame\r\n// for all this spaghetti code: Daniel Vagner\r\n"]}